<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> ⌬ A.P.I - Studio ⌬ </title>
<style>
  html,body{height:100%;margin:0;padding:0;background:#0b0b0b;overflow:hidden;width:100%}
  canvas{display:block;width:100vw;height:100vh;position:fixed;top:0;left:0}
  
  #loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(11,11,11,.85);backdrop-filter:blur(12px);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000;transition:opacity .4s ease;pointer-events:none;opacity:0}
  .loader-text{color:#d0bcff;font-family:'Segoe UI',sans-serif;font-size:1.4rem;font-weight:600;margin-bottom:20px}
  .progress-container{width:280px;height:4px;background:rgba(255,255,255,.1);border-radius:10px;overflow:hidden}
  #progress-bar{width:0%;height:100%;background:#d0bcff;box-shadow:0 0 15px rgba(208,188,255,.4);transition:width .2s ease}
  
  .lil-gui{--background-color:rgba(28,27,31,.92);--text-color:#e6e1e5;--widget-color:#4f378b;--hover-color:#6750a4;--focus-color:#d0bcff;border-radius:32px!important;padding:20px!important;backdrop-filter:blur(14px);font-family:'Segoe UI',sans-serif!important}

  /* Panel Thingy for lore */
  #lore-container {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 320px;
    background: rgba(28, 27, 31, 0.85);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(208, 188, 255, 0.2);
    border-radius: 20px;
    color: #e6e1e5;
    font-family: 'Segoe UI', sans-serif;
    z-index: 1001;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: pointer;
    overflow: hidden;
    max-height: 50px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  }
  #lore-container.open {
    max-height: 400px;
    width: 450px;
    cursor: default;
  }
  .lore-header {
    padding: 15px;
    text-align: center;
    font-weight: 700;
    letter-spacing: 2px;
    color: #d0bcff;
    text-transform: uppercase;
    border-bottom: 1px solid rgba(208, 188, 255, 0.1);
  }
  .lore-content {
    padding: 20px;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #cac4d0;
    opacity: 0;
    transition: opacity 0.3s ease;
    max-height: 300px;
    overflow-y: auto;
  }
  #lore-container.open .lore-content { opacity: 1; }
  .lore-content::-webkit-scrollbar { width: 5px; }
  .lore-content::-webkit-scrollbar-thumb { background: #4f378b; border-radius: 10px; }
</style>
<script type="importmap">{"imports":{"three":"https://cdn.jsdelivr.net/npm/three@0.144.0/build/three.module.js"}}</script>
</head>
<body oncontextmenu="return false;">
  <div id="loading-overlay">
    <div class="loader-text">Loading A.P.I... <span id="percent">0%</span></div>
    <div class="progress-container"><div id="progress-bar"></div></div>
  </div>

  <div id="lore-container" onclick="this.classList.toggle('open')">
    <div class="lore-header">A.P.I - Data Log</div>
    <div class="lore-content" onclick="event.stopPropagation()">
      <strong>A.P.I:</strong> Artificial Petzar Intelligence <br><br>
      <strong>Summary:</strong> A.P.I is a tiny spider-like robot that contains a lot of energy compared to billions of stars and is all made by the genius Petzar “RelHound”
      She is made to serve as a source of energy and advanced technology in their world, being able to defend and protect the planet by using its never-ending resources <br><br>
      <strong>Power Source</strong> Converted Storm Electricity <br><br>
      <strong>Extra</strong> She was painted with a very tiny brush, and despite RelHound's paws being good to handle machinery, he isn't perfect for painting, 
      but it got her a good look instead of just metal on top of Gravony (The most conducting and near-indestructible mineral in Terraly)    
      <br><br>
      <em>Created by MGuida</em>
    </div>
  </div>

  <canvas id="canvas"></canvas>

  <script type="module">
    import*as THREE from 'three';import{GLTFLoader}from'https://cdn.jsdelivr.net/npm/three@0.144.0/examples/jsm/loaders/GLTFLoader.js';import{OrbitControls}from'https://cdn.jsdelivr.net/npm/three@0.144.0/examples/jsm/controls/OrbitControls.js';import{RGBELoader}from'https://cdn.jsdelivr.net/npm/three@0.144.0/examples/jsm/loaders/RGBELoader.js';import GUI from'https://cdn.jsdelivr.net/npm/lil-gui@0.18.0/dist/lil-gui.esm.min.js';

    // Big script
    document.onkeydown=function(e){if(e.keyCode==123)return false;if(e.ctrlKey&&e.shiftKey&&(e.keyCode=='I'.charCodeAt(0)||e.keyCode=='C'.charCodeAt(0)||e.keyCode=='J'.charCodeAt(0)))return false;if(e.ctrlKey&&e.keyCode=='U'.charCodeAt(0))return false;};

    const _0x1a2b='https://mguida-petzar.github.io/A.P.I-Model/new-folder/Project%20API21.glb';
    const _0x3c4d='https://mguida-petzar.github.io/A.P.I-Model/new-folder/Project%20API22OFF.glb';
    const _0x5e6f='https://mguida-petzar.github.io/A.P.I-Model/new-folder/Project%20API23Gravony.glb';
    const _0x7g8h='https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/2k/qwantani_dusk_2_puresky_2k.hdr';

    const _ovl=document.getElementById('loading-overlay');const _bar=document.getElementById('progress-bar');const _pct=document.getElementById('percent');const _cvs=document.getElementById('canvas');const _rd=new THREE.WebGLRenderer({canvas:_cvs,antialias:true});_rd.setPixelRatio(Math.min(window.devicePixelRatio,2));_rd.setSize(window.innerWidth,window.innerHeight);_rd.outputEncoding=THREE.sRGBEncoding;_rd.toneMapping=THREE.ACESFilmicToneMapping;_rd.toneMappingExposure=1.0;_rd.physicallyCorrectLights=true;const _sc=new THREE.Scene();_sc.background=new THREE.Color(0x0b0b0b);const _cm=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,0.1,1000);const _ct=new OrbitControls(_cm,_rd.domElement);_ct.enableDamping=true;const _al=new THREE.AmbientLight(0xffffff,1.5);_sc.add(_al);const _sl=new THREE.DirectionalLight(0xffffff,2.5);_sc.add(_sl);const _om=[];[new THREE.Vector3(0,10,0),new THREE.Vector3(0,-10,0),new THREE.Vector3(10,0,0),new THREE.Vector3(-10,0,0),new THREE.Vector3(0,0,10),new THREE.Vector3(0,0,-10)].forEach(d=>{const l=new THREE.DirectionalLight(0xffffff,0.5);l.position.copy(d);_sc.add(l);_om.push(l)});let _ev=null;new RGBELoader().load(_0x7g8h,t=>{t.mapping=THREE.EquirectangularReflectionMapping;_ev=t;if(_pa.showEnvironment)_sc.environment=_ev});let _cur=null;let _mat=[];const _ld=new GLTFLoader();const _pa={modelVariant:'Full Body',showEnvironment:true,metalness:1.0,roughness:0.5,enableSun:true,lightAzimuth:0,lightElevation:40.5,reset:function(){_pa.modelVariant='Full Body';_pa.showEnvironment=true;_pa.metalness=1.0;_pa.roughness=0.5;_uEv();_uLi();_uSl();_gui.controllersRecursive().forEach(c=>c.updateDisplay())}};function _uEv(){if(_pa.showEnvironment){_sc.environment=_ev;_al.intensity=0.2;_om.forEach(l=>l.intensity=0.1)}else{_sc.environment=null;_al.intensity=1.5;_om.forEach(l=>l.intensity=0.5)}}function _uLi(){_sl.visible=_pa.enableSun;const p=THREE.MathUtils.degToRad(90-_pa.lightElevation);const t=THREE.MathUtils.degToRad(_pa.lightAzimuth);_sl.position.setFromSphericalCoords(10,p,t)}function _uSl(){let u;switch(_pa.modelVariant){case'Full Body':u=_0x1a2b;break;case'Leg Off':u=_0x3c4d;break;case'Gravony':u=_0x5e6f;break;default:u=_0x1a2b}_lMd(u)}function _lMd(u){_ovl.style.opacity="1";if(_cur){_sc.remove(_cur);_mat=[]}_ld.load(u,g=>{_cur=g.scene;_cur.traverse(n=>{if(n.isMesh&&n.material){n.material.metalness=_pa.metalness;n.material.roughness=_pa.roughness;n.material.envMapIntensity=1.2;_mat.push(n.material)}});_sc.add(_cur);const b=new THREE.Box3().setFromObject(_cur);const c=b.getCenter(new THREE.Vector3());const s=b.getSize(new THREE.Vector3());_cur.position.sub(c);const m=Math.max(s.x,s.y,s.z);const z=Math.abs(m/2/Math.tan((_cm.fov*Math.PI/180)/2));_cm.position.set(0,m*0.2,z*2.2);_ct.target.set(0,0,0);_ct.update();setTimeout(()=>{_ovl.style.opacity="0"},350)},x=>{if(x.lengthComputable){const p=(x.loaded/x.total)*100;_bar.style.width=p+'%';_pct.innerText=Math.round(p)+'%'}})}function _uMt(){_mat.forEach(m=>{m.metalness=_pa.metalness;m.roughness=_pa.roughness})}const _gui=new GUI({title:'A.P.I STUDIO'});const _f1=_gui.addFolder('A.P.I Variants');_f1.add(_pa,'modelVariant',['Full Body','Leg Off','Gravony']).name('Model Variant').onChange(_uSl);_f1.add(_pa,'showEnvironment').name('Enable Space Reflections').onChange(_uEv);_f1.open();const _f2=_gui.addFolder('Dynamic Lighting');_f2.add(_pa,'enableSun').name('Directional Light').onChange(_uLi);_f2.add(_pa,'lightAzimuth',0,360).name('H-Move').onChange(_uLi);_f2.add(_pa,'lightElevation',-90,90).name('V-Move').onChange(_uLi);const _f3=_gui.addFolder('Material Finish');_f3.add(_pa,'metalness',0,1).name('Metalness').onChange(_uMt);_f3.add(_pa,'roughness',0,1).name('Roughness').onChange(_uMt);_gui.add(_pa,'reset').name('Reset Studio');_uSl();_uLi();function animate(){requestAnimationFrame(animate);_ct.update();_rd.render(_sc,_cm)}animate();window.addEventListener('resize',()=>{_cm.aspect=window.innerWidth/window.innerHeight;_cm.updateProjectionMatrix();_rd.setSize(window.innerWidth,window.innerHeight)});
  </script>
</body>
</html>




